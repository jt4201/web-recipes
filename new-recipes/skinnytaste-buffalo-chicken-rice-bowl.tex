% nop
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass[../cookbook]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\renewcommand{\myTitleText}{Buffalo Chicken Rice Bowl}
\renewcommand{\myURLText}{https://www.skinnytaste.com/buffalo-chicken-rice-bowls/}
\renewcommand{\myFilename}{skinnytaste-buffalo-chicken-rice-bowl.jpg}
\renewcommand{\myServings}{4 bowls}
\renewcommand{\myAuthor}{skinnytaste}
\renewcommand{\myCookTime}{15 mins}
\renewcommand{\myPrepTime}{15 mins}
\renewcommand{\myTotalTime}{30 mins}
\renewcommand{\myIndexEntry}{Mains!Rice Bowls}
\renewcommand{\myPreamble}{
  Delicious high protein Buffalo Chicken Rice Bowls are made with chicken breast,
  black beans, brown rice, cheese and smothered in hot sauce. Perfect for meal prep!
}

\hypersetup{%
  pdfauthor={\myAuthor},
  pdftitle={\myTitleText}
}

\sbox{\myIngred}{%
  \begin{minipage}[t]{\the\dimexpr0.35\textwidth}\raggedright\sffamily\small
    \textbf{Ingredients}
    \begin{itemize}
      \item 3 8 ounce boneless skinless chicken breasts, diced into ½ inch cubes
      \item 1 teaspoon olive or canola oil
      \item ½ cup diced red onion
      \item ½ tsp paprika
      \item ½ tsp cumin
      \item ¼ teaspoon kosher salt
      \item 1 cup canned low sodium black beans, rinsed and drained
      \item ½ cup buffalo sauce, Franks
      \item 3 cups cooked brown rice
      \item ½ cup part-skim cheddar cheese, or dairy-free cheddar
      \item ¼ cup chopped scallions
    \end{itemize}
  \end{minipage}
}

\sbox{\myMethod}{%
  \begin{minipage}[t]{\the\dimexpr0.6\textwidth-2em}
    \textbf{Method}
    \begin{enumerate}
      \item Heat oil in a medium pot over medium-low heat. Add onions and cook until
        they have caramelized slightly, about 5 minutes.
      \item Add black beans, paprika, cumin and salt; stir to combine and heat
        through, 3 to 4 minutes.
      \item While that cooks, heat a large skillet over high heat, when hot spray with
        oil and add the chicken.
      \item Cook until browned and cooked through in the center, about 5 minutes,
        flipping so it cooks on each side.
      \item Set aside in a medium bowl and toss with the hot sauce.
      \item \textbf{To serve}
        \begin{enumerate}
          \item Pour ¾ cup rice in each bowl, top each with ¼ cup beans and
            cheese, divide the chicken over the bowls.
          \item If eating right away, I like to melt the cheese by putting it in the
            microwave 30 seconds. Top with scallions.
        \end{enumerate}
      \item \textbf{For meal prep}
        \begin{enumerate}
          \item Refrigerate up to 4 days. To reheat, microwave about 3 minutes or
            until heated through.
        \end{enumerate}
    \end{enumerate}
  \end{minipage}
}

\newcommand{\cmdSubText}[2]{%
  \ifthenelse{\equal{#2}{}} {} {\cmdSubtitle{#1}{#2}}
}

\sbox{\myTitle}{%
  \begin{minipage}[t]{0.6\textwidth}\raggedright%
    \textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\
    \cmdSubText{PREP~TIME}{\myPrepTime}\quad
    \cmdSubText{COOK~TIME}{\myCookTime}\quad
    \cmdSubText{TOTAL~TIME}{\myTotalTime}\quad \\
    \cmdSubText{SERVINGS}{\myServings}\vspace{0.5ex} \\
    \cmdSubText{AUTHOR}{\myAuthor}\\
    \cmdSubText{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex} \\}
    \myPreamble{}
  \end{minipage}
}

\sbox{\myImage}{%
  \begin{minipage}[t]{0.35\textwidth}
    \ifthenelse{\equal{\myFilename}{}}{}{\adjustbox{valign=t}{\includegraphics[width=\textwidth]{\myFilename}}}
  \end{minipage}
}

\framebox{%
  \cmdRecipe{recipelist}{\myIndexEntry}{\myTitleText}
  \cmdRecipe{authorlist}{\myAuthor}{\myTitleText}
\begin{tabular}{@{}llllll@{}}
  \multicolumn{4}{@{}l@{}}{\usebox{\myTitle}} &
  \multicolumn{2}{@{}l@{}}{\usebox{\myImage}} \\
  \multicolumn{6}{@{}l@{}}{} \rule{0.95\linewidth}{0.4pt}\vspace{2ex} \\ 
  \multicolumn{2}{@{}l@{}}{\usebox{\myIngred}} &
  \multicolumn{4}{@{}l@{}}{\usebox{\myMethod}} \\
\end{tabular}
}

\end{document}
