%
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass[../cookbook]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\renewcommand{\myTitleText}{My Go-To Pickled Red Onions}
\renewcommand{\myURLText}{https://pinchofyum.com/my-go-to-pickled-red-onions}
\renewcommand{\myFilename}{PoY-pickled-red-onions}
\renewcommand{\myServings}{1 jar}
\renewcommand{\myAuthor}{Pinch of Yum}
\renewcommand{\myCookTime}{}
\renewcommand{\myPrepTime}{}
\renewcommand{\myTotalTime}{5 minutes}
\renewcommand{\myPreamble}{
  It’s a fact: pickled red onions make everything better. A little extra bite, a
  little extra tang, and those beautiful ribbony bits of purple and pink. This is one
  of my favorite fast and easy ways to make any meal a little (lot) more exciting.
}

\sbox{\myIngred}{
  \begin{minipage}[t]{\the\dimexpr 0.35\textwidth}\raggedright
    \textbf{Ingredients}
    \begin{itemize}
      \item 1 red onion, peeled and cut into several chunks
      \item white vinegar (roughly \sfrac{1}{3} cup)
      \item water (roughly \sfrac{2}{3} cup)
      \item \sfrac{1}{2} teaspoon coarse kosher salt
      \item \sfrac{1}{2} teaspoon sugar
    \end{itemize}
  \end{minipage}
}

\sbox{\myMethod}{
  \begin{minipage}[t]{\the\dimexpr 0.55\textwidth - 2em}\raggedright
    \textbf{Method}
    \begin{enumerate}
      \item Thinly slice your chunks of onion into C-shapes using a mandoline on the
        thinnest setting. (This is what I prefer – if you want the onions more chunky,
        adjust as needed.)
      \item Place the onions in a jar and add vinegar – I just eyeball it until the
        jar is about one third of the way full.
      \item Fill the rest of the jar with water. Add salt and sugar; shake a few times
        to combine. 
      \item Let them rest in the fridge for 30 minutes to 1 hour – then they’re ready
        to use! They can stay in the fridge up to 5--7 days.
    \end{enumerate}
  \end{minipage}
}

\begin{tabular}{ll}
  \begin{minipage}[t]{0.6\textwidth}\raggedright
  \cmdRecipe{recipelist}{Condiments!Pickles}{\myTitleText}
  \cmdRecipe{authorlist}{\myAuthor}{\myTitleText}
    \ifthenelse{\equal{\myTitleText}{}} {}%
    {\textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\ }
    \ifthenelse{ \equal{\myPrepTime}{} } {}%
      {\cmdSubtitle{PREP~TIME}{\myPrepTime}\quad}
      \ifthenelse{ \equal{\myCookTime}{} } {}%
      {\cmdSubtitle{COOK~TIME}{\myCookTime} \\ }
      \ifthenelse{ \equal{\myTotalTime}{} } {}%
    {\cmdSubtitle{TOTAL~TIME}{\myTotalTime}\quad}
      \ifthenelse{ \equal{\myServings}{} } {}%
      {\cmdSubtitle{SERVINGS}{\myServings} \\ }
      \ifthenelse{ \equal{\myAuthor}{} } {}%
      {\cmdSubtitle{AUTHOR}{\myAuthor} \\ }
      \ifthenelse{ \equal{\myURLText}{} } {}%
      {\cmdSubtitle{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex}} \\ }
    \ifthenelse{ \equal{\myPreamble}{}} {}%
      {\myPreamble}
\end{minipage} &
\begin{minipage}[t]{0.35\textwidth}
  \adjustbox{valign=t}{\includegraphics[width=\textwidth]{\myFilename}}
\end{minipage} \\
\end{tabular}\vspace{5mm}

\par\noindent\rule{0.95\textwidth}{0.4pt}\vspace{5mm}

\begin{tabular}{ll}
  \usebox{\myIngred} & \usebox{\myMethod} \\
\end{tabular}

\end{document}
