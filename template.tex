% arara: testing
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass{newRecipe}
\begin{document}

% FIXME:
\renewcommand{\myTitleText}{}
\renewcommand{\myURLText}{}
\renewcommand{\myFilename}{}
\renewcommand{\myServings}{}
\renewcommand{\myAuthor}{}
\renewcommand{\myCookTime}{}
\renewcommand{\myPrepTime}{}
\renewcommand{\myTotalTime}{}
\renewcommand{\myPreamble}{
}

\hypersetup{
  pdfauthor={\myAuthor},
  pdftitle={\myTitleText}
}

\sbox{\myIngred}{
  \begin{minipage}[t]{\the\dimexpr 0.35\textwidth}
    \textbf{Ingredients}
    \begin{itemize}
      \item % TODO: 
    \end{itemize}
  \end{minipage}
}

\sbox{\myMethod}{
  \begin{minipage}[t]{\the\dimexpr 0.6\textwidth - 2em}
    \textbf{Method}
    \begin{enumerate}
      \item % TODO: 
    \end{enumerate}
  \end{minipage}
}

\newcommand{\cmdSubText}[2]{%
  \ifthenelse{\equal{#2}{}} {} {\cmdSubtitle{#1}{#2}}
}

\sbox{\myTitle}{
  \begin{minipage}[t]{0.6\textwidth}\raggedright
    \textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\
    \cmdSubText{PREP~TIME}{\myPrepTime\quad}
    \cmdSubText{COOK~TIME}{\myCookTime\quad}
    \cmdSubText{TOTAL~TIME}{\myTotalTime\quad \\}
    \cmdSubText{SERVINGS}{\myServings \vspace{0.5ex} \\}
    \cmdSubText{AUTHOR}{\myAuthor \\}
    \cmdSubText{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex} \\}
    \myPreamble{}
  \end{minipage}
}

\sbox{\myImage}{
  \begin{minipage}[t]{0.35\textwidth}
    \adjustbox{valign=t}{\includegraphics[width=\textwidth]{images/\myFilename}}
  \end{minipage}
}

\framebox{
\begin{tabular}{@{}llllll@{}}
  \multicolumn{4}{@{}l@{}}{\usebox{\myTitle}} &
  \multicolumn{2}{@{}l@{}}{\usebox{\myImage}} \\
  \multicolumn{6}{@{}l@{}}{} \rule{0.95\linewidth}{0.4pt}\vspace{2ex} \\ 
  \multicolumn{2}{@{}l@{}}{\usebox{\myIngred}} &
  \multicolumn{4}{@{}l@{}}{\usebox{\myMethod}} \\
\end{tabular}
}

\end{document}
