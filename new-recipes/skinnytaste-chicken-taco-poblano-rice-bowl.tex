% nop
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass[../cookbook]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\renewcommand{\myTitleText}{Chicken Taco Poblano Rice Bowl}
\renewcommand{\myURLText}{https://www.skinnytaste.com/chicken-taco-poblano-rice-bowls/}
\renewcommand{\myFilename}{skinnytaste-chicken-taco-poblano-rice-bowl.jpg}
\renewcommand{\myServings}{4 bowls}
\renewcommand{\myAuthor}{skinnytaste}
\renewcommand{\myCookTime}{15 mins}
\renewcommand{\myPrepTime}{10 mins}
\renewcommand{\myTotalTime}{25 mins}
\renewcommand{\myIndexEntry}{Mains!Rice Bowls}
\renewcommand{\myPreamble}{
  These quick and easy Chicken Taco Poblano Rice Bowls are perfect for dinner or to
  make ahead for meal prep! 
}

\hypersetup{%
  pdfauthor={\myAuthor},
  pdftitle={\myTitleText}
}

\sbox{\myIngred}{%
  \begin{minipage}[t]{\the\dimexpr0.35\textwidth}
    \textbf{Ingredients}
    \begin{itemize}
      \item 1 ¼ pounds organic boneless skinless chicken breasts, cut ½ inch cubes,
        from 3 small
      \item 2 teaspoons olive oil
      \item 1 medium red onion, peeled and diced
      \item ¼ cup cilantro, minced plus more for garnish
      \item 1 poblano pepper, seeded and diced
      \item 1 roma tomato, cored and diced
      \item 1 lime, halved
      \item taco seasoning, see below
      \item kosher salt
      \item 1 cup frozen or fresh corn kernels
      \item 3 cups cooked brown rice, heated (use cauliflower rice for low-carb)
      \item ¼ cup cheddar-jack cheese
      \item ¼ cup 2\% sour cream or Greek yogurt, optional
      \item \textbf{Taco seasoning}
        \begin{itemize}
          \item 1 teaspoon garlic powder
          \item 1 teaspoon cumin
          \item 1 teaspoon kosher salt
          \item ½ teaspoon chili powder
          \item ½ teaspoon paprika
          \item ½ teaspoon oregano
        \end{itemize}
    \end{itemize}
  \end{minipage}
}

\sbox{\myMethod}{%
  \begin{minipage}[t]{\the\dimexpr0.6\textwidth-2em}
    \textbf{Method}
    \begin{enumerate}
      \item Dice the chicken into small pieces. Combine taco seasoning in a small bowl
        and set aside.
      \item To make the pico de gallo, set 3 tablespoons of the diced onion aside and
        place it in a bowl with tomato, cilantro, 2 teaspoons lime juice, ¼ teaspoon
        salt. Set aside.
      \item Add oil to a large skillet over medium-high heat. When hot, add the
        chicken and cook until it starts to brown, 2 to 3 minutes.
      \item Add the remaining onion, poblano pepper and taco seasoning to the skillet
        and cook until it softens, 2 to 3 minutes. Add ½ cup water and corn. Cook 1
        to 2 minutes then remove from heat.
      \item Divide rice in 4 bowls, top with chicken, cheese, pico de gallo and
        optional sour cream.
    \end{enumerate}
  \end{minipage}
}

\newcommand{\cmdSubText}[2]{%
  \ifthenelse{\equal{#2}{}} {} {\cmdSubtitle{#1}{#2}}
}

\sbox{\myTitle}{%
  \begin{minipage}[t]{0.6\textwidth}\raggedright%
    \textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\
    \cmdSubText{PREP~TIME}{\myPrepTime}\quad
    \cmdSubText{COOK~TIME}{\myCookTime}\quad
    \cmdSubText{TOTAL~TIME}{\myTotalTime}\quad \\
    \cmdSubText{SERVINGS}{\myServings}\vspace{0.5ex} \\
    \cmdSubText{AUTHOR}{\myAuthor}\\
    \cmdSubText{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex} \\}
    \myPreamble{}
  \end{minipage}
}

\sbox{\myImage}{%
  \begin{minipage}[t]{0.35\textwidth}
    \ifthenelse{\equal{\myFilename}{}}{}{\adjustbox{valign=t}{\includegraphics[width=\textwidth]{\myFilename}}}
  \end{minipage}
}

\framebox{%
  \cmdRecipe{recipelist}{\myIndexEntry}{\myTitleText}
  \cmdRecipe{authorlist}{\myAuthor}{\myTitleText}
\begin{tabular}{@{}llllll@{}}
  \multicolumn{4}{@{}l@{}}{\usebox{\myTitle}} &
  \multicolumn{2}{@{}l@{}}{\usebox{\myImage}} \\
  \multicolumn{6}{@{}l@{}}{} \rule{0.95\linewidth}{0.4pt}\vspace{2ex} \\ 
  \multicolumn{2}{@{}l@{}}{\usebox{\myIngred}} &
  \multicolumn{4}{@{}l@{}}{\usebox{\myMethod}} \\
\end{tabular}
}

\end{document}
