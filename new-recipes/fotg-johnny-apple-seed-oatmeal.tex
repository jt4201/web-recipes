% arara: testing
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass{newRecipe}
\begin{document}

% FIXME:
\renewcommand{\myTitleText}{Johnny Apple Seed Oatmeal}
\renewcommand{\myURLText}{https://www.freshoffthegrid.com/johnny-apple-seed-oatmeal/}
\renewcommand{\myFilename}{fotg-johnny-apple-seed-oatmeal}
\renewcommand{\myServings}{2 bowls}
\renewcommand{\myAuthor}{Fresh Off The Grid}
\renewcommand{\myCookTime}{10 minutes}
\renewcommand{\myPrepTime}{2 minutes}
\renewcommand{\myTotalTime}{12 minutes}
\renewcommand{\myPreamble}{
  Oatmeal is the unsung hero of camping breakfasts. While it’s not as flashy as a cast
  iron breakfast skillet or a well-prepared egg sandwich, a bowl of warm oatmeal never
  fails to come through in a pinch. Nothing else is as economical to buy, easy to
  make, or as fast to prepare. When times are tough or you’re just in a rush, it’s
  oatmeal that comes to the rescue.
}

\sbox{\myIngred}{
  \begin{minipage}[t]{\the\dimexpr 0.35\textwidth}\raggedright
    \textbf{Ingredients}
    \begin{itemize}
      \item pinch salt
      \item 1 cup rolled oats
      \item 1 medium apple diced into ½" cubes
      \item ½ teaspoon ground cinnamon
      \item ¼ teaspoon ground nutmeg
      \item ¼ teaspoon ground cloves
      \item ¼ teaspoon allspice
      \item 2 tablespoons hemp, flax, or chia seeds (we use a blend of equal parts
        hemp flax, and chia)
      \item 2 tablespoons maple syrup
    \end{itemize}
  \end{minipage}
}

\sbox{\myMethod}{
  \begin{minipage}[t]{\the\dimexpr 0.55\textwidth - 2em}\raggedright
    \textbf{Method}
    \begin{enumerate}
      \item Heat the water and salt into a medium pot until it comes to a boil.
      \item Add the oats, simmer for about ten minutes, or until the oats are tender,
        stirring occasionally. Halfway through the cooking time, add the apple,
        spices, and maple syrup.
    \end{enumerate}
  \end{minipage}
}

\begin{tabular}{ll}
  \begin{minipage}[t]{0.6\textwidth}\raggedright
    \ifthenelse{\equal{\myTitleText}{}} {}%
    {\textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\ }
    \ifthenelse{ \equal{\myPrepTime}{} } {}%
      {\cmdSubtitle{PREP~TIME}{\myPrepTime}\quad}
      \ifthenelse{ \equal{\myCookTime}{} } {}%
      {\cmdSubtitle{COOK~TIME}{\myCookTime} \\ }
      \ifthenelse{ \equal{\myTotalTime}{} } {}%
    {\cmdSubtitle{TOTAL~TIME}{\myTotalTime}\quad}
      \ifthenelse{ \equal{\myServings}{} } {}%
      {\cmdSubtitle{SERVINGS}{\myServings} \\ }
      \ifthenelse{ \equal{\myAuthor}{} } {}%
      {\cmdSubtitle{AUTHOR}{\myAuthor} \\ }
      \ifthenelse{ \equal{\myURLText}{} } {}%
      {\cmdSubtitle{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex}} \\ }
    \ifthenelse{ \equal{\myPreamble}{}} {}%
      {\myPreamble}
\end{minipage} &
\begin{minipage}[t]{0.35\textwidth}
  \adjustbox{valign=t}{\includegraphics[width=\textwidth]{images/\myFilename}}
\end{minipage} \\
\end{tabular}\vspace{5mm}

\par\noindent\rule{0.95\textwidth}{0.4pt}\vspace{5mm}

\begin{tabular}{ll}
  \usebox{\myIngred} & \usebox{\myMethod} \\
\end{tabular}

\end{document}
