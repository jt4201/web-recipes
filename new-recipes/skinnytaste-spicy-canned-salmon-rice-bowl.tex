% nop
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass[../cookbook]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\renewcommand{\myTitleText}{Spicy Canned Salmon Rice Bowl}
\renewcommand{\myURLText}{https://www.skinnytaste.com/spicy-canned-salmon-rice-bowl/}
\renewcommand{\myFilename}{skinnytaste-spicy-canned-salmon-rice-bowl.jpg}
\renewcommand{\myServings}{1 bowl}
\renewcommand{\myAuthor}{skinnytaste}
\renewcommand{\myCookTime}{0 min}
\renewcommand{\myPrepTime}{5 mins}
\renewcommand{\myTotalTime}{5 mins}
\renewcommand{\myIndexEntry}{Mains!Rice Bowls}
\renewcommand{\myPreamble}{
This quick and easy Sushi-inspired Spicy Canned Salmon Rice Bowl makes a great
budget-friendly, high protein lunch!}

\hypersetup{%
  pdfauthor={\myAuthor},
  pdftitle={\myTitleText}
}

\sbox{\myIngred}{%
  \begin{minipage}[t]{\the\dimexpr0.35\textwidth}
    \textbf{Ingredients}
    \begin{itemize}
      \item 1 5-ounce can skinless wild pink or red salmon, in water drained
      \item 1 tablespoons light mayonnaise
      \item 2 teaspoons sriracha sauce, plus more for topping
      \item 2 scallions, white and greens separated
      \item Pinch kosher salt
      \item ¾ cup cooked brown rice, heated
      \item ½ cup chopped cucumber, I use Persian cucumbers
      \item Furikake or chopped nori and sesame seeds, for garnish
    \end{itemize}
  \end{minipage}
}

\sbox{\myMethod}{%
  \begin{minipage}[t]{\the\dimexpr0.6\textwidth-2em}
    \textbf{Method}
    \begin{enumerate}
      \item In a small bowl, combine the salmon, mayonnaise, sriracha, scallion whites
        and pinch of salt and mix well.
      \item In the bowl you plan to serve in, add the rice.
      \item Top it with the salmon salad, chopped cucumber, furikake and scallion
        greens plus more sriracha if desired.
    \end{enumerate}
  \end{minipage}
}

\newcommand{\cmdSubText}[2]{%
  \ifthenelse{\equal{#2}{}} {} {\cmdSubtitle{#1}{#2}}
}

\sbox{\myTitle}{%
  \begin{minipage}[t]{0.6\textwidth}\raggedright%
    \textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\
    \cmdSubText{PREP~TIME}{\myPrepTime}\quad
    \cmdSubText{COOK~TIME}{\myCookTime}\quad
    \cmdSubText{TOTAL~TIME}{\myTotalTime}\quad \\
    \cmdSubText{SERVINGS}{\myServings}\vspace{0.5ex} \\
    \cmdSubText{AUTHOR}{\myAuthor}\\
    \cmdSubText{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex} \\}
    \myPreamble{}
  \end{minipage}
}

\sbox{\myImage}{%
  \begin{minipage}[t]{0.35\textwidth}
    \ifthenelse{\equal{\myFilename}{}}{}{\adjustbox{valign=t}{\includegraphics[width=\textwidth]{\myFilename}}}
  \end{minipage}
}

\framebox{%
  \cmdRecipe{recipelist}{\myIndexEntry}{\myTitleText}
  \cmdRecipe{authorlist}{\myAuthor}{\myTitleText}
\begin{tabular}{@{}llllll@{}}
  \multicolumn{4}{@{}l@{}}{\usebox{\myTitle}} &
  \multicolumn{2}{@{}l@{}}{\usebox{\myImage}} \\
  \multicolumn{6}{@{}l@{}}{} \rule{0.95\linewidth}{0.4pt}\vspace{2ex} \\ 
  \multicolumn{2}{@{}l@{}}{\usebox{\myIngred}} &
  \multicolumn{4}{@{}l@{}}{\usebox{\myMethod}} \\
\end{tabular}
}

\end{document}
