% nop
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass[../cookbook]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\renewcommand{\myTitleText}{Loaded Chipotle Chicken Snack Wrap}
\renewcommand{\myURLText}{https://www.ethanchlebowski.com/cooking-techniques-recipes/loaded-chipotle-chicken-snack-wrap}
\renewcommand{\myFilename}{}
\renewcommand{\myServings}{1 wrap}
\renewcommand{\myAuthor}{Ethan Chlebowski}
\renewcommand{\myCookTime}{}
\renewcommand{\myPrepTime}{}
\renewcommand{\myTotalTime}{}
\renewcommand{\myIndexEntry}{Mains}
\renewcommand{\myPreamble}{
}

\hypersetup{%
  pdfauthor={\myAuthor},
  pdftitle={\myTitleText}
}

\sbox{\myIngred}{%
  \begin{minipage}[t]{\the\dimexpr0.35\textwidth}\raggedright\sffamily\small
    \textbf{\large Ingredients}
    \begin{jitem}
      \item Chipotle Chicken
        \begin{jsubitem}
        \item 2 chicken breasts (~500 g), diced
        \item 1\% or 5 grams of salt
        \item 10 g (2 tsp) of chipotles in adobo (jarred or canned), minced
        \item 10 g (2 tsp) of mayo
        \item A sprinkle of ground cumin seeds
        \end{jsubitem}
      \item Wrap Components, per serving
        \begin{jsubitem}
        \item 1 low-cal flour tortilla
        \item 70 g (1/2 cup) chipotle chicken cubes (above)
        \item 14 g (1 tbsp) Colby jack cheese, shredded
        \item 14 g (1 tbsp) low-fat sour cream
        \item A squirt of hot sauce
        \item {\bfseries Optional additions}
          \begin{jsubitem}
          \item sliced lettuce
          \item tomato
          \item onion
          \item beans
          \end{jsubitem}
        \item Wax paper, for wrapping
        \end{jsubitem}
      \end{jitem}
    \end{minipage}
  }

  \sbox{\myMethod}{%
    \begin{minipage}[t]{\the\dimexpr0.6\textwidth-2em}\raggedright\sffamily\small
      \textbf{\normalsize Method}
      \begin{description}[labelindent=1em,leftmargin=2em,parsep=0.5ex,itemsep=0.5ex]
      \item [Prep the chicken]
        After dicing the chicken into small cubes, mix in a bowl with the salt, adobo,
        mayo, and cumin. This will help the chicken bites brown faster and get
        seasoned on every side.
      \item [Cook the chicken] 
        Add the marinated chicken cubes to a pan or griddle over high hear. Allow them
        to sear undisturbed for a few minutes or until color develops on one side,
        then flip to finish cooking through and get color on different sides. Set
        aside to rest.
      \item [Gather remaining ingredients] 
        While the chicken is cooking or resting, prep any other ingredients, like
        slicing vegetables or grating cheese.
      \item [Assemble the wrap] 
        Lay down a square of wax paper with a tortilla on top. Add in all remaining
        ingredients, then wrap up as tight as you can by tucking in the sides of the
        tortilla.

        The wax paper lets you freeze these for meal prep. If you are freezing them,
        skip adding the sour cream. It will still taste good, but the texture gets weird
        when unthaws.
      \item [Heat the wrap] \hfill
        \begin{description}[labelindent=1em,leftmargin=2em,parsep=0.5ex,itemsep=0.5ex]
          \item [From the fridge] Microwave for 45 seconds
          \item [From the freezer] Microwave for 90-120 seconds (let cool before biting!)
        \end{description}
    \end{description}
  \end{minipage}
}

\newcommand{\cmdSubText}[2]{%
  \ifthenelse{\equal{#2}{}} {} {\cmdSubtitle{#1}{#2}}
}

\sbox{\myTitle}{%
  \begin{minipage}[t]{0.6\textwidth}\raggedright%
    \textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\
    \cmdSubText{PREP~TIME}{\myPrepTime}\quad
    \cmdSubText{COOK~TIME}{\myCookTime}\quad
    \cmdSubText{TOTAL~TIME}{\myTotalTime}\quad \\
    \cmdSubText{SERVINGS}{\myServings}\vspace{0.5ex} \\
    \cmdSubText{AUTHOR}{\myAuthor}\\
    \cmdSubText{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex} \\}
    \myPreamble{}
  \end{minipage}
}

\sbox{\myImage}{%
  \begin{minipage}[t]{0.35\textwidth}
    \ifthenelse{\equal{\myFilename}{}}{}{\adjustbox{valign=t}{\includegraphics[width=\textwidth]{\myFilename}}}
  \end{minipage}
}

\framebox{%
  \cmdRecipe{recipelist}{\myIndexEntry}{\myTitleText}
  \cmdRecipe{authorlist}{\myAuthor}{\myTitleText}
\begin{tabular}{@{}llllll@{}}
  \multicolumn{4}{@{}l@{}}{\usebox{\myTitle}} &
  \multicolumn{2}{@{}l@{}}{\usebox{\myImage}} \\
  \multicolumn{6}{@{}l@{}}{} \rule{0.95\linewidth}{0.4pt}\vspace{2ex} \\ 
  \multicolumn{2}{@{}l}{\usebox{\myIngred}} &
  \multicolumn{4}{@{}l}{\usebox{\myMethod}} \\
\end{tabular}
}

\end{document}
