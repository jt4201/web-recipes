% 
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass[../cookbook]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\renewcommand{\myTitleText}{Hawaiian Macaroni Salad}
\renewcommand{\myURLText}{https://www.emilyenchanted.com/hawaiian-macaroni-salad/}
\renewcommand{\myFilename}{EE-hawaiian-macaroni-salad.jpg}
\renewcommand{\myServings}{8 servings}
\renewcommand{\myAuthor}{Emily Enchanted}
\renewcommand{\myCookTime}{10 minutes}
\renewcommand{\myPrepTime}{10 minutes}
\renewcommand{\myTotalTime}{2 hours 20 minutes}
\renewcommand{\myPreamble}{
  If you're looking to add a touch of tropical flavor to your next meal, then look no
  further than a classic Hawaiian Macaroni Salad.
}

\sbox{\myIngred}{
  \begin{minipage}[t]{\the\dimexpr 0.35\textwidth}\raggedright
    \textbf{Ingredients}
    \begin{itemize}
      \item 16 ounces macaroni
      \item 2 ½ cups shredded carrots
      \item 2 tablespoons shredded yellow onion
      \item 2 tablespoons apple cider vinegar
      \item 1 tablespoon green onions, chopped
    \end{itemize}
  \end{minipage}
}

\sbox{\myMethod}{
  \begin{minipage}[t]{\the\dimexpr 0.55\textwidth - 2em}\raggedright
    \textbf{Method}
    \begin{enumerate}
      \item 2 cups mayonnaise
      \item ¼ cup milk
      \item 1 tablespoon granulated sugar
      \item ¼ teaspoon salt
      \item ¼ teaspoon ground black pepper
    \end{enumerate}
  \end{minipage}
}

\begin{tabular}{ll}
  \cmdRecipe{recipelist}{Salad}{\myTitleText}
  \cmdRecipe{authorlist}{\myAuthor}{\myTitleText}
  \begin{minipage}[t]{0.6\textwidth}\raggedright
    \ifthenelse{\equal{\myTitleText}{}} {}%
    {\textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\ }
    \ifthenelse{ \equal{\myPrepTime}{} } {}%
      {\cmdSubtitle{PREP~TIME}{\myPrepTime}\quad}
      \ifthenelse{ \equal{\myCookTime}{} } {}%
      {\cmdSubtitle{COOK~TIME}{\myCookTime} \\ }
      \cmdSubtitle{CHILL~TIME}{2 hours}\quad
      \ifthenelse{ \equal{\myTotalTime}{} } {}%
    {\cmdSubtitle{TOTAL~TIME}{\myTotalTime}\\}
      \ifthenelse{ \equal{\myServings}{} } {}%
      {\cmdSubtitle{SERVINGS}{\myServings} \\ }
      \ifthenelse{ \equal{\myAuthor}{} } {}%
      {\cmdSubtitle{AUTHOR}{\myAuthor} \\ }
      \ifthenelse{ \equal{\myURLText}{} } {}%
      {\cmdSubtitle{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex}} \\ }
    \ifthenelse{ \equal{\myPreamble}{}} {}%
      {\myPreamble}
\end{minipage} &
\begin{minipage}[t]{0.35\textwidth}
  \adjustbox{valign=t}{\includegraphics[width=\textwidth]{\myFilename}}
\end{minipage} \\
\end{tabular}\vspace{5mm}

\par\noindent\rule{0.95\textwidth}{0.4pt}\vspace{5mm}

\begin{tabular}{ll}
  \usebox{\myIngred} & \usebox{\myMethod} \\
\end{tabular}

\end{document}
