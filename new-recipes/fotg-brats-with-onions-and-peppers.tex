%
% arara: xelatex
% arara: xelatex
% arara: latexmk: { options: ['-c'] }
% vim: tw=86:
\documentclass[../cookbook]{subfiles}
\graphicspath{{\subfix{../images/}}}
\begin{document}

\renewcommand{\myTitleText}{Cast Iron Brats with Peppers and Onions}
\renewcommand{\myURLText}{https://www.freshoffthegrid.com/cast-iron-brats-peppers-onions/}
\renewcommand{\myFilename}{fotg-brats-with-onions-and-peppers.jpg}
\renewcommand{\myServings}{4 servings}
\renewcommand{\myAuthor}{Fresh Off The Grid}
\renewcommand{\myCookTime}{20 minutes}
\renewcommand{\myPrepTime}{5 minutes}
\renewcommand{\myTotalTime}{25 minutes}
\renewcommand{\myPreamble}{
Get into the summer spirit with these pan-fried campfire brats with caramelized onions
and peppers.}

\sbox{\myIngred}{
  \begin{minipage}[t]{\the\dimexpr 0.35\textwidth}\raggedright
    \textbf{Ingredients}
    \begin{itemize}
        \item 2 tablespoons olive oil
        \item 1 yellow onion sliced into half moons
        \item 1 red bell pepper deseeded and sliced lengthwise
        \item 1 poblano pepper deseeded and sliced lengthwise
        \item 1 teaspoon salt
        \item 1 lb bratwurst
        \item Sandwich rolls or buns and mustard to serve
    \end{itemize}
  \end{minipage}
}

\sbox{\myMethod}{
  \begin{minipage}[t]{\the\dimexpr 0.55\textwidth - 2em}\raggedright
    \textbf{Method}
    \begin{enumerate}
      \item Preheat a cast iron skillet over medium heat on your campfire grate (or
        camp stove). Add the oil, then the onions, peppers, and salt. Cook for a few
        minutes until they just begin to soften, then add the bratwurst, nestling them
        into the vegetables so they come in contact with the skillet.
      \item Turn the brats and stir the vegetables occasionally, until the brats are
        cooked through (internal temp of 160°F), 15–-20 minutes.
      \item Remove from the heat and divide the brats and veggies among the sandwich
        rolls.
      \item Top with mustard and enjoy!
    \end{enumerate}
  \end{minipage}
}

\begin{tabular}{ll}
  \begin{minipage}[t]{0.6\textwidth}\raggedright
  \cmdRecipe{recipelist}{Mains}{\myTitleText}
  \cmdRecipe{authorlist}{\myAuthor}{\myTitleText}
    \ifthenelse{\equal{\myTitleText}{}} {}%
    {\textbf{\LARGE\bfseries \myTitleText} \vspace{2ex} \\ }
    \ifthenelse{ \equal{\myPrepTime}{} } {}%
      {\cmdSubtitle{PREP~TIME}{\myPrepTime}\quad}
      \ifthenelse{ \equal{\myCookTime}{} } {}%
      {\cmdSubtitle{COOK~TIME}{\myCookTime} \\ }
      \ifthenelse{ \equal{\myTotalTime}{} } {}%
    {\cmdSubtitle{TOTAL~TIME}{\myTotalTime}\quad}
      \ifthenelse{ \equal{\myServings}{} } {}%
      {\cmdSubtitle{SERVINGS}{\myServings} \\ }
      \ifthenelse{ \equal{\myAuthor}{} } {}%
      {\cmdSubtitle{AUTHOR}{\myAuthor} \\ }
      \ifthenelse{ \equal{\myURLText}{} } {}%
      {\cmdSubtitle{SOURCE}{\href{\myURLText}{\myTitleText} \vspace{1ex}} \\ }
    \ifthenelse{ \equal{\myPreamble}{}} {}%
      {\myPreamble}
\end{minipage} &
\begin{minipage}[t]{0.35\textwidth}
  \adjustbox{valign=t}{\includegraphics[width=\textwidth]{\myFilename}}
\end{minipage} \\
\end{tabular}\vspace{5mm}

\par\noindent\rule{0.95\textwidth}{0.4pt}\vspace{5mm}

\begin{tabular}{ll}
  \usebox{\myIngred} & \usebox{\myMethod} \\
\end{tabular}

\end{document}
